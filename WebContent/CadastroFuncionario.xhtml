<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:p="http://primefaces.org/ui">  
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
       Web Refeicoes
    </title>
    <h:outputStylesheet library="bootstrap/css" name="bootstrap.min.css" />
    <h:outputStylesheet library="bootstrap/css" name="bootstrap.css" />
    <h:outputStylesheet library="css" name="Menu.css" />
    <h:outputStylesheet library="css" name="util.css" />
    <h:outputStylesheet library="css" name="WebRefeicoes.css" />
    <h:outputStylesheet name="webjars/font-awesome/4.4.0/css/font-awesome.css"/>
    <h:outputScript library="jquery" name="jquery-ui-1.9.2.custom.min.js" />
    <h:outputScript library="bootstrap/js" name="bootstrap.js" />
    <h:outputScript library="bootstrap/js" name="bootstrap.min.js" />
    <h:outputScript library="jquery" name="jqueryMaskedPlugin.js" />
</h:head>
<h:body>
			<div class="container-fluid" style="    padding: 0px;">
			
				<h:form id="formulario">
					<p:growl id="messages" life="5000"/>
					
					<div class="col-lg-1 form-group">
						<p:outputLabel for="Codigo" value="Código " /><br/>
						<p:inputText style="width: 100%" 
						id="Codigo"
						value="#{FuncionarioController.funcionario.codigo}"/>
					</div>
					<div class="col-lg-4 form-group">
						<p:outputLabel for="Nome" value="Nome " /><br/>
						<p:inputText style="width: 100%" 
						 value="#{FuncionarioController.funcionario.nome}"
						 required="true" 
						 requiredMessage=" 'Nome' é obrigatório."
						 id="Nome" />
						 
					</div>
					<div class="col-lg-2 form-group">
						<p:outputLabel for="CPF" value="CPF " /><br/>
						<p:inputMask 
						style="width: 100%" 
						required="true" 
						id="CPF" 
						mask="999.999.999-99"
						requiredMessage=" 'CPF' é obrigatório."
						maxlength="11"
						value="#{FuncionarioController.funcionario.cpf}"
						/>
					</div>
					<div class="col-lg-2 form-group">
						<p:outputLabel for="RG" value="RG " /><br/>
						<p:inputText style="width: 100%" 
						required="true" 
						id="RG"
						requiredMessage=" 'RG' é obrigatório."
						maxlength="9"
						value="#{FuncionarioController.funcionario.rg}"
						/>
					</div>
					<div class="col-lg-3 form-group">
						<p:outputLabel for="DataNascimento" value="Data de Nascimento " /><br/>
						<p:calendar 
						value="#{FuncionarioController.funcionario.dataNascimento}"
						pattern="dd/MM/yyyy"
						locale="de" navigator="true"
						style="width: 100%" 
						required="true"  
						requiredMessage=" 'Data de Nascimento' é obrigatório."
						id="DataNascimento"
						 mask="true" />
					</div>
					<div class="col-lg-1 form-group">
						<p:outputLabel for="DDDTelefone" value="DDD " /><br/>
						<p:inputMask style="width: 100%"  
						id="DDDTelefone" 
						mask="(99)"
						maxlength="2"
						value="#{FuncionarioController.funcionario.dddTelefone}"/>
					</div>
					<div class="col-lg-2 form-group">
						<p:outputLabel for="Telefone" value="Telefone " /><br/>
						<p:inputMask style="width: 100%" 
						id="Telefone" 
						maxlength="8"
						mask="9999-9999"
						value="#{FuncionarioController.funcionario.telefone}"
						/>
					</div>
					<div class="col-lg-1 form-group">
						<p:outputLabel for="DDDCelular" value="DDD " /><br/>
						<p:inputMask style="width: 100%" 
						id="DDDCelular"
						maxlength="2"
						mask="(99)"
						value="#{FuncionarioController.funcionario.dddCelular}"
						 />
					</div>
					<div class="col-lg-2 form-group">
						<p:outputLabel for="Celular" value="Celular " /><br/>
						<p:inputText style="width: 100%"
						id="Celular"
						maxlength="9"
						value="#{FuncionarioController.funcionario.celular}"
						/>
					</div>
					<div class="col-lg-3 form-group">
						<p:outputLabel for="Usuario" value="Usuário " /><br/>
						<p:inputText style="width: 100%"  
						id="Usuario"
						required="true" 
						maxlength="30"
						requiredMessage=" 'Usuário' é obrigatório."
						value="#{FuncionarioController.funcionario.usuario}"
						/>
					</div>
					<div class="col-lg-3 form-group">
						<p:outputLabel for="senha" value="Senha " /><br/>
						<p:password id='senha' style="width: 100%"  
						required="true" 
						requiredMessage=" 'Senha' é obrigatório."
						redisplay="true"
						maxlength="20"
						value="#{FuncionarioController.senha}"
						/>
					</div>
					
					<div class="col-lg-2 form-group">
						<p:outputLabel for="Rua" value="Rua " /><br/>
						<p:inputText style="width: 100%"  
						id="Rua"
						value="#{FuncionarioController.funcionario.rua}"
						/>
					</div>
					<div class="col-lg-2 form-group">
						<p:outputLabel for="Numero" value="Número " /><br/>
						<p:inputText style="width: 100%" 
						id="Numero"
						maxlength="8"
						value="#{FuncionarioController.funcionario.numEnd}"
						/>
					</div>
					<div class="col-lg-3 form-group">
						<p:outputLabel for="Bairro" value="Bairro " /><br/>
						<p:inputText style="width: 100%"  
						id="Bairro"
						value="#{FuncionarioController.funcionario.bairro}"
						/>
					</div>
					<div class="col-lg-3 form-group">
						<p:outputLabel for="Cidade" value="Cidade " /><br/>
						<p:inputText style="width: 100%"  
						id="Cidade"
						value="#{FuncionarioController.funcionario.cidade}"
						/>
					</div>
					<div class="col-lg-2 form-group">
						<p:outputLabel for="CEP" value="CEP " /><br/>
						<p:inputMask  style="width: 100%"  
						id="CEP"
						mask="99999-999"
						maxlength="8"
						value="#{FuncionarioController.funcionario.cep}"
						/>
					</div>
					<div class="col-lg-2 form-group">
						<p:outputLabel for="permissao" value="Permissão" /><br/>
						<p:selectOneMenu id="permissao" value="#{FuncionarioController.funcionario.permissao}" style="width: 100%">
							  <f:selectItem itemLabel='Normal' itemValue="normal"/> 
							  <f:selectItem itemLabel='Admin' itemValue="administrador"/> 
				        </p:selectOneMenu>
					</div>
					<div  class="col-lg-12 form-group " style="    text-align: right;">
						
						  <p:commandButton value= "Salvar" update="messages gridFuncionario" styleClass="btn btn-success" action="#{FuncionarioController.adicionarFuncionario}" >
						  </p:commandButton>
						  <p:commandButton immediate="true" value="Limpar" actionListener="#{FuncionarioController.limparDados}"  update="@form:formulario"  styleClass="btn btn-primary" >
				          	 <p:resetInput target="formulario" />
				          </p:commandButton>
					</div>
				</h:form>
			</div>
			
			<p:dataTable id='gridFuncionario' emptyMessage="Nenhum Registro Encontrado"
			scrollable="true"
			style="padding: 0px 15px;"
			selectionMode="single"
			var="funcionario" 
			scrollHeight="600"
			selection="#{FuncionarioController.selecionaFuncionario}"
			rowKey="#{funcionario.codigo}"
			value="#{FuncionarioController.listaFuncionarios}">
				<p:ajax update="formulario"  event="rowSelect" listener="#{FuncionarioController.trazerDados}"/>
   				<p:column headerText=""
   					style='width: 100px;text-align: center' sortBy="">
   					<h:form>
	   					<p:commandButton 
	   					styleClass="btn btn-danger"
	   					update="gridFuncionario" action="#{FuncionarioController.excluirFuncionario(funcionario)}" value="Excluir">
	   					</p:commandButton>
   					</h:form>
   					
   				</p:column>

				
   				<p:column headerText="Codigo"
   					style="width: 90px;text-align: center" 
   					sortBy="#{funcionario.codigo}">
   					<h:outputText value="#{funcionario.codigo}" />
   				</p:column>

   				<p:column headerText="Nome" 
   					style="width: 500px"
   					sortBy="#{funcionario.nome}">
   					<h:outputText value="#{funcionario.nome}" />
   				</p:column>

   				<p:column headerText="CPF"
   					style="width: 160px;text-align: center"
   					sortBy="#{funcionario.cpf}">
   					<h:outputText styleClass="text-center" value="#{funcionario.cpf}" />
   				</p:column>
				
				<p:column headerText="Usuário"
   					style='width: 120px;text-align: center' sortBy="#{funcionario.usuario}">
   					<h:outputText value="#{funcionario.usuario}" />
   				</p:column>
   				
   				<p:column headerText="DDD (Celular)"
   					style='width: 200px;text-align: center' sortBy="#{funcionario.dddCelular}">
   					<h:outputText value="#{funcionario.dddCelular}" />
   				</p:column>

   				<p:column headerText="Celular"
   					style='width: 140px;text-align: center' sortBy="#{funcionario.celular}">
   					<h:outputText value="#{funcionario.celular}"/>
   				</p:column>
   			</p:dataTable>
  </h:body>
  
  <script>
  $("#formulario\\:Celular").mask("9999-9999?9")
  .focusout(function (event) {  
      var target, phone, element;  
      target = (event.currentTarget) ? event.currentTarget : event.srcElement;  
      phone = target.value.replace(/\D/g, '');
      element = $(target);  
      element.unmask();  
      if(phone.length > 10) {  
          element.mask("(99) 99999-999?9");  
      } else {  
          element.mask("(99) 9999-9999?9");  
      }  
  });
  
  </script>
</html>  